<!DOCTYPE html>

<head>
    <script>
        document.addEventListener("DOMContentLoaded", function () {

        }, false);
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <script defer>hljs.configure({ cssSelector: "code", languages: ["python"] }); hljs.highlightAll(); hljs.initLineNumbersOnLoad();</script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body,{delimiters:[{left: '$$', right: '$$', display: true},{left: '$', right: '$', display: false}]});"></script>

    <style>
        img {
            max-width: 90vw;
            max-height: 90vh;
        }

        .center {
            text-align: center;
        }

        .katex {
            /* o padrão é 1.21, vc pode remover essa configuração se quiser deixar o padrão */
            font-size: 1.0em;
        }

        table.custom,
        table.custom>thead>tr>th,
        table.custom>tbody>tr>td,
        table.custom>tbody>tr>th {
            /* tabela centralizada e com bordas */
            border: 1px solid black;
            border-collapse: collapse;
            margin-left: auto;
            margin-right: auto;
            padding-left: 5px;
            padding-right: 5px;
            text-align: center;
        }

        table pre {
            /* Remove a margem interna de tags pre dentro de tabelas */
            margin: 0;
            padding: 0;
            text-align: left;
        }

        td:has(pre) {
            /* tags pre dentro de tabela são alinhadas no topo à esquerda */
            vertical-align: top;
        }

        table.align-left th,
        table.align-left td {
            /* alinha à esquerda as células da tabela */
            text-align: left;
        }

        /* inicia a lista de exercícios */
        ol.excs {
            padding-inline-start: 0em;
            counter-reset: excs;
            list-style: none;
        }

        /* põe um numerador num item da lista de exercícios, desde que não seja da classe no-mark */
        ol.excs>li:not(.no-mark)::before {
            counter-increment: excs;
            content: counters(excs, ".") ". ";
        }

        /* põe uma barra vertical ao lado do item da lista de exercícios */
        ol.excs>li {
            /* Change this to adjust the line color and thickness */
            border-left: 2px solid #000;
            /* Optional: Add padding to create some space between the bar and content */
            padding-left: 10px;
            margin-block-start: 1em;
            margin-block-end: 1em;
        }

        ol.section {
            counter-reset: section;
            list-style-type: none;
        }

        ol.section li::before {
            counter-increment: section;
            content: counters(section, ".") ". ";
        }

        td.hljs-ln-numbers {
            /* estilizar as linhas de código da extensao highlightjs-line-numbers */
            color: #ccc;
            border-right: 1px solid #999;
            padding-right: 5px;
        }

        td.hljs-ln-code {
            /* estilizar as linhas de código da extensao highlightjs-line-numbers */
            padding-left: 10px;
        }
    </style>
</head>

<div id="7-python-object-oriented-shortcuts">
    <h1>7 Atalhos orientados a objetos de Python</h1>
    <div id="7-1-python-built-in-functions">
        <h2>Funções incorporadas do Python</h2>
        <p>Muitas dessas funções empregam duck typing: esperam receber objetos com determinados atributos, mas não forçam os objetos a serem de determinada classe.</p>
        <div id="7-1-1-the-len-function">
            <h3>A função <code>len</code></h3>
            <p>Muitos objetos são contáveis, como strings, dicionários ou listas. Internamente, eles implementam o método <code>__len__</code>, que é chamado implicitamente ao passá-los como argumento à função <code>len</code>. Portanto, para saber a quantidade de caracteres numa string, por exemplo, podemos fazer:</p>
            <pre><code>>>> string = 'eu tenho 22 caracteres' 
>>> string.__len__() # orientado a objetos
22
>>> len(string) # implicitamente orientado a objetos
22</code></pre>
            <p>Embora em muitas linguagem o habitual seja chamar um método do tipo <code>__len__</code> do objeto, no Python, a convenção é chamar a função <code>len</code>.</p>
        </div>
        <div id="7-1-2-reversed">
            <h3>A função <code>reversed</code></h3>
            <p>A função <code>reversed</code> retorna uma cópia invertida de um objeto. Internamente, ela chama o método <code>__reversed__</code> do objeto. Se esse método não existir, a função chama os métodos <code>__len__</code> e <code>__getitem__</code> do objeto para conseguir percorrer seus valores de trás para frente. Lembre-se, você pode implementar os métodos mágicos para definir o funcionamento das funções incorporadas do Python. Qual a saída do seguinte código:</p>
            <pre><code>normal_list = [1, 2, 3, 4, 5]

class CustomSequence:
def __len__(self):
    return 5
def __getitem__(self, index):
    return f"x{index}"

class FunkyBackwards:
def __reversed__(self):
    return "BACKWARDS!"

for seq in normal_list, CustomSequence(), FunkyBackwards():
print(f"\n{seq.__class__.__name__}: ", end="")
for item in reversed(seq):
    print(item, end=", ")</code></pre>
        </div>
        <div id="7-1-3-enumerate">
            <h3>A função <code>enumerate</code></h3>
            <p>A função <code>enumerate</code> retorna uma sequência de tuplas compostas pelo índice e valor de cada item de um objeto iterável. É útil quando queremos modificar uma lista enquanto a percorremos.</p>
            <pre><code>names = ["ana", "beatriz", "carla", "daiana"]

for name in names:
    name = name.upper()

print(names)

for i in range(len(names)):
    names[i] = names[i].upper()

print(names)

for i, v in enumerate(names):
    names[i] = v.lower()

print(names)</code></pre>
        </div>
        <div id="other-built-in-functions">
            <h3>Outras funções incorporadas</h3>
            <p>Lembre-se, você pode acessar a documentação do Python sem a Internet através do modo interativo, e com o comando <code>help</code>. Por exemplo, para ver informações sobre as funções incorporadas, execute <code>help(__builtins__)</code>. Para saber sobre uma função específica, <code>help(enumerate)</code>. Dentre outras funções, podemos citar:</p>
            <ul>
                <li><code>abs(x)</code>: Retorna o valor absoluto de um número.</li>
                <li><code>all(iterable)</code>: Retorne True se todos os elementos de iterable forem verdadeiros (ou se o iterável estiver vazio).</li>
                <li><code>any(iterable)</code>: Retorne True se algum elemento de iterable for verdadeiro. Se iterable estiver vazio, retorne False.</li>
                <li><code>bin(x)</code>: Converte um número inteiro em uma string binária prefixada com “0b”.</li>
                <li><code>chr(i)</code>: Retorna o caractere que representa o código Unicode i. Por exemplo, chr(97) retorna a string 'a', enquanto chr(8364) retorna a string '€'. Este é o inverso de ord.</li>
                <li><code>delattr(object, name)</code>: Exclui o atributo name de object. Por exemplo, delattr(x, 'foobar') é equivalente a del x.foobar.</li>
                <li><code>dir(object)</code>: Sem argumentos, retorne a lista de nomes no escopo local atual. Com um argumento, tenta retornar uma lista de atributos válidos para esse objeto.</li>
                <li><code>exec(str)</code>: Analisa e executa o código de str. CUIDADO COM ATAQUE DE INJEÇÃO DE CÓDIGO!</li>
                <li><code>getattr(object, name)</code>: Retorna o valor do atributo name de object.</li>
                <li><code>hasattr(object, name)</code>: Retorna True se object possui o atributo name.</li>
                <li><code>hex(x)</code>: Converte um número inteiro em uma string hexadecimal minúscula prefixada com “0x”.</li>
                <li><code>isinstance(object, classinfo)</code>: Retorna True se object for uma instância de classinfo ou de uma subclasse (direta, indireta ou virtual) dele.</li>
                <li><code>max(iterable, *, key=None)</code>: Retorna o maior item de um iterável ou o maior de dois ou mais argumentos.</li>
                <li><code>min(iterable, *, key=None)</code>: Retorna o menor item de um iterável ou o menor de dois ou mais argumentos.</li>
                <li><code>ord(c)</code>: Retorna o código Unicode que o caractere c representa. É o inverso de chr.</li>
                <li><code>round(number, ndigits=None)</code>: Retorna o número arredondado com ndigits casas decimais. Se ndigits for omitido, retorna o número inteiro mais próximo.</li>
                <li><code>setattr(object, name, value)</code>: Atribui value ao atributo name de object.</li>
                <li><code>sum(iterable, /, start=0)</code>: Soma o start e os itens de iterable da esquerda para a direita e retorna o total.</li>
                <li><code>zip(*iterables, strict=False)</code>: Itera sobre vários iteráveis em paralelo, produzindo tuplas com um item de cada um. Se strict for True, levanta exceção caso os iteráveis sejam de tamanhos diferentes. Por exemplo:
                    <pre><code>>>> for item in zip([1, 2, 3], ["sugar", "spice", "everything nice"]):
...     print(item, end=" ")
...
(1, 'sugar') (2, 'spice') (3, 'everything nice')
>>> for item in zip(range(3), ["fee", "fi", "fo", "fum"]):
...     print(item, end=" ")
... 
(0, 'fee') (1, 'fi') (2, 'fo')
>>> for item in zip(range(3), ["fee", "fi", 
"fo", "fum"], True):
...     print(item, end=" ")
...
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'bool' object is not iterable</code></pre>
                </li>







            </ul>
        </div>
        <div id="7-1-4-file-i-o">
            <h3>Leitura e escrita de arquivos</h3>
            <p>A função incorporada <code>open</code> retorna um objeto que representa um arquivo. Por padrão, o arquivo é aberto no modo somente-leitura. Para abri-lo no modo escrita, devemos estipular no argumento:</p>
            <pre><code>contents = "Some file contents"
file = open("filename", "w")
file.write(contents)
file.close()</code></pre>
            <p>Se o arquivo estiver numa codificação específica diferente do padrão do sistema operacional, devemos passá-la como argumento: <code>open('file.txt', encoding='latin-1')</code>.</p>
            <p>O argumento <code>'w'</code> trunca o arquivo inteiro. Para adicionar ao final do arquivo em vez de truncá-lo, passe o argumento <code>'a'</code>, de “anexar”. Para criar um arquivo, passe o argumento <code>'x'</code>, que levanta uma exceção caso o arquivo já exista. Para abrir um arquivo binário e ler ou escrever bytes diretamente, poderíamos passar o argumento <code>'rb'</code> ou <code>'wb'</code>. Esses modos de abertura de arquivo não são específicos do Python, são um padrão estabelecido para comunicação entre o sistema operacionais e as várias linguagems de programação existentes. As possíveis combinações de <a href="https://stackoverflow.com/a/67558256/4072641">modo de abertura</a> são:</p>
            <table class="custom">
                <thead>
                    <tr>
                        <th></th>
                        <th>r</th>
                        <th>r+</th>
                        <th>x</th>
                        <th>x+</th>
                        <th>w</th>
                        <th>w+</th>
                        <th>a</th>
                        <th>a+</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="https://docs.python.org/3/library/io.html#io.IOBase.readable" rel="noreferrer">readable</a></td>
                        <td>√</td>
                        <td>√</td>
                        <td></td>
                        <td>√</td>
                        <td></td>
                        <td>√</td>
                        <td></td>
                        <td>√</td>
                    </tr>
                    <tr>
                        <td><a href="https://docs.python.org/3/library/io.html#io.IOBase.writable" rel="noreferrer">writeable</a></td>
                        <td></td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>default position: start</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td>√</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>default position: end</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>√</td>
                        <td>√</td>
                    </tr>
                    <tr>
                        <td><a href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" rel="noreferrer">must exist</a></td>
                        <td>√</td>
                        <td>√</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><a href="https://docs.python.org/3/library/exceptions.html#FileExistsError" rel="noreferrer">mustn't exist</a></td>
                        <td></td>
                        <td></td>
                        <td>√</td>
                        <td>√</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>truncate (clear file) on load</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>√</td>
                        <td>√</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Always write to EOF</td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>√</td>
                        <td>√</td>
                    </tr>
                </tbody>
            </table>

            <h4>Lendo</h4>
            <p>Podemos chamar os seguintes métodos no modo leitura:</p>
            <ul>
                <li><code>read(size=-1, /)</code>: Lê e retorna no máximo size caracteres como uma única string. Se size for negativo None, lê até EOF. Cuidado ao usar esse método para arquivos grandes, pois o computador pode travar ou a memória pode transbordar.</li>
                <li><code>readline(size=-1, /)</code>: Lê até nova linha ou EOF e retorne uma única string. Se size for especificado, no máximo size caracteres serão lidos.</li>
                <li><code>readlines(hint=-1, /)</code>: Lê e retorna uma lista de linhas do arquivo. hint pode ser especificada para controlar o número de linhas lidas: nenhuma outra linha será lida se o tamanho total (em bytes/caracteres) de todas as linhas até o momento exceder hint. Assim como em <code>read</code>, pode ser perigoso chamar esse método para arquivos grandes.</li>
            </ul>
            <p>Esses métodos também funcionam para leitura de arquivos binários, apesar de que chamar um <code>readline</code> pode não fazer muito sentido.</p>
            <p>Observe que é possível iterar em objetos de arquivos usando <code>for line in file: ...</code> sem chamar <code>file.readlines()</code>.</p>

            <h4>Escrevendo</h4>
            <p>Para escrever, temos os métodos:</p>
            <ul>
                <li><code>write(s, /)</code>: Escreve s no arquivo e retorna o número de caracteres escritos.</li>
                <li><code>writelines(lines, /)</code>: Escreve uma lista de linhas no arquivo. Os separadores de linhas não são adicionados, por isso é normal que cada uma das linhas fornecidas tenha um separador de linha no final.</li>
            </ul>
            <h4>Outros métodos interessantes</h4>
            <ul>
                <li><code>seek(offset, whence=os.SEEK_SET, /)</code>: Avança ou retrocede, dependendo de whence, a posição do fluxo em offset bytes, e retorne a nova posição absoluta. Os valores de whence são:
                    <ul>
                        <li><code>os.SEEK_SET</code>: Início do fluxo (padrão); offset pode ser zero ou positivo.</li>
                        <li><code>os.SEEK_CUR</code>: Posição atual do fluxo; offset pode ser negativo..</li>
                        <li><code>os.SEEK_END</code>: Final do fluxo; ofsset geralmente é negativo.</li>
                    </ul>
                </li>
                <li><code>readable()</code>: Retorna True se o fluxo puder ser lido. Se for falso, read() gerará OSError.</li>
                <li><code>seekable()</code>: Retorna True se o fluxo suportar acesso aleatório. Se for falso, seek(), tell() e truncate() gerarão OSError.</li>
                <li><code>tell()</code>: Retorna a posição atual do fluxo.</li>
                <li><code>writable()</code>: Retorna True se o fluxo suportar escrita. Se for False, write() e truncate() gerarão OSError.</li>
                <li><code>encoding</code>: Não é um método, é um atributo que contém o nome da codificação usada para decodificar os bytes do fluxo em strings e para codificar strings em bytes.</li>
            </ul>
        </div>
        <div id="7-1-5-placing-it-in-context">
            <h3>Contextualizando</h3>
            Lastly, and I do mean lastly, we come to the close method. This method should be called when we are finished reading or writing the file, to ensure any buffered writes are written to the disk, that the file has been properly cleaned up, and that all resources associated with the file are released back to the operating system. Technically, this will happen automatically when the script exits, but it's better to be explicit and clean up after ourselves, especially in long-running processes.
        </div>

    </div>
</div>